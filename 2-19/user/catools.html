
<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Using the catools Library &#8212; cothread 19 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=ac02cc09edc035673794" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=ac02cc09edc035673794" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=ac02cc09edc035673794"></script>

    <script src="../_static/documentation_options.js?v=5554b881"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=30646c52"></script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user/catools';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.14.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://DiamondLightSource.github.io/cothread/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '19';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/dls-favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Training: Channel Access with cothread" href="training/cothread.html" />
    <link rel="prev" title="Using the cothread Library" href="cothread.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/dls-logo.svg" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/dls-logo.svg" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
    <p class="title logo__title">cothread</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../developer/index.html">
                        Developer Guide
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://github.com/DiamondLightSource/cothread/releases">
                    Release Notes
                  </a>
                </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/DiamondLightSource/cothread" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/cothread" title="PyPI" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-cube fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="versionswitcherbutton" type="button" role="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="listbox" aria-controls="versionswitcherlist" aria-label="Version switcher list">
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="versionswitcherlist" class="version-switcher__menu dropdown-menu list-group-flush py-0" role="listbox" aria-labelledby="versionswitcherbutton">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../developer/index.html">
                        Developer Guide
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://github.com/DiamondLightSource/cothread/releases">
                    Release Notes
                  </a>
                </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/DiamondLightSource/cothread" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/cothread" title="PyPI" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-cube fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="versionswitcherbutton" type="button" role="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="listbox" aria-controls="versionswitcherlist" aria-label="Version switcher list">
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="versionswitcherlist" class="version-switcher__menu dropdown-menu list-group-flush py-0" role="listbox" aria-labelledby="versionswitcherbutton">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="cothread.html">Using the cothread Library</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Using the catools Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="training/cothread.html">Training: Channel Access with <code class="docutils literal notranslate"><span class="pre">cothread</span></code></a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">User Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Using the...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="module-cothread.catools">
<span id="using-the-catools-library"></span><span id="catools"></span><h1>Using the catools Library<a class="headerlink" href="#module-cothread.catools" title="Link to this heading">#</a></h1>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="cothread.html#cothread"><span class="std std-ref">Using the cothread Library</span></a>.</p>
</div>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>The <a class="reference internal" href="#module-cothread.catools" title="cothread.catools"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cothread.catools</span></code></a> library provides the following functions for access
to EPICS “process variables” over channel access:</p>
<dl class="simple">
<dt><a class="reference internal" href="#cothread.catools.caget" title="cothread.catools.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">caget(pvs,</span> <span class="pre">...)</span></code></a></dt><dd><p>Returns a single snapshot of the current value of each PV.</p>
</dd>
<dt><a class="reference internal" href="#cothread.catools.caput" title="cothread.catools.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput(pvs,</span> <span class="pre">values,</span> <span class="pre">...)</span></code></a></dt><dd><p>Writes values to one or more PVs.</p>
</dd>
<dt><a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor(pvs,</span> <span class="pre">callback,</span> <span class="pre">...)</span></code></a></dt><dd><p>Receive notification each time any of the listed PVs changes.</p>
</dd>
<dt><a class="reference internal" href="#cothread.catools.connect" title="cothread.catools.connect"><code class="xref py py-func docutils literal notranslate"><span class="pre">connect(pvs,</span> <span class="pre">...)</span></code></a></dt><dd><p>Can be used to establish a connection to a list of PVs before calling the
other routines.  This routine is optional.</p>
</dd>
</dl>
<p>To use these functions a certain amount of setup work is required.  The
following code illustrates a simple application which reads a value from one
PV, writes to another PV, and monitors a third until terminated with
control-C:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Library version specification required for dls libraries</span>
<span class="kn">from</span> <span class="nn">pkg_resources</span> <span class="kn">import</span> <span class="n">require</span>
<span class="n">require</span><span class="p">(</span><span class="s1">&#39;cothread&#39;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">cothread</span>
<span class="kn">from</span> <span class="nn">cothread.catools</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># Using caput: write 1234 into PV1.  Raises exception on failure</span>
<span class="n">caput</span><span class="p">(</span><span class="s1">&#39;PV1&#39;</span><span class="p">,</span> <span class="mi">1234</span><span class="p">)</span>

<span class="c1"># Print out the value reported by PV2.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">caget</span><span class="p">(</span><span class="s1">&#39;PV2&#39;</span><span class="p">))</span>

<span class="c1"># Monitor PV3, printing out each update as it is received.</span>
<span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="n">camonitor</span><span class="p">(</span><span class="s1">&#39;PV3&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

<span class="c1"># Now run the camonitor process until interrupted by Ctrl-C.</span>
<span class="n">cothread</span><span class="o">.</span><span class="n">WaitForQuit</span><span class="p">()</span>
</pre></div>
</div>
<p>The following details are general to all cothread applications.</p>
<ul>
<li><p>At Diamond the routine <code class="code docutils literal notranslate"><span class="pre">pkg_resources.require</span></code> must be used to specify a
particular version of the library to use, thus the following lines are
required at the start of any catools application (Python2 only):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pkg_resources</span> <span class="kn">import</span> <span class="n">require</span>
<span class="n">require</span><span class="p">(</span><span class="s1">&#39;cothread==2.6&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or if the most recent version is ok then the version number can be omitted as
in the example.</p>
</li>
<li><p>Any <code class="code docutils literal notranslate"><span class="pre">EPICS_CA_</span></code> environment variables should be set at this point,
before importing <a class="reference internal" href="#module-cothread.catools" title="cothread.catools"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cothread.catools</span></code></a> (see <a class="reference internal" href="#environment"><span class="std std-ref">Environment Variables</span></a> below).</p></li>
<li><p>Of course, the libraries must be imported.  The <a class="reference internal" href="#module-cothread.catools" title="cothread.catools"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cothread.catools</span></code></a>
library is a sub-module of the <a class="reference internal" href="cothread.html"><span class="doc">cothread</span></a> library, and can be imported
separately.</p></li>
<li><p>If <a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a> is being used then the program should suspend in an
event loop of some sort.  The routine <a class="reference internal" href="cothread.html#cothread.WaitForQuit" title="cothread.WaitForQuit"><code class="xref py py-func docutils literal notranslate"><span class="pre">cothread.WaitForQuit()</span></code></a> can be
used, as otherwise the <a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a> activity has no opportunity to run
before the program exits!</p></li>
</ul>
</section>
<section id="environment-variables">
<span id="environment"></span><h2>Environment Variables<a class="headerlink" href="#environment-variables" title="Link to this heading">#</a></h2>
<p>A number of environment variables affect the operation of channel access.  These
can be set using the <a class="reference external" href="https://docs.python.org/3/library/os.html#os.environ" title="(in Python v3.11)"><code class="xref any docutils literal notranslate"><span class="pre">os.environ</span></code></a> dictionary – but note that these need
to be set <em>before</em> loading the <a class="reference internal" href="#module-cothread.catools" title="cothread.catools"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cothread.catools</span></code></a> module.  The following
are documented in the <a class="reference external" href="http://www.aps.anl.gov/epics/EpicsDocumentation/AppDevManuals/ChannelAccess/cadoc_4.htm">EPICS channel access developers manual</a>.</p>
<dl class="simple">
<dt><code class="code docutils literal notranslate"><span class="pre">EPICS_CA_MAX_ARRAY_BYTES</span></code></dt><dd><p>Configures the maximum number of bytes that can be transferred in a single
channel access message.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">EPICS_CA_ADDR_LIST</span></code></dt><dd><p>A space separated list of channel access server addresses.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">EPICS_CA_AUTO_ADDR_LIST</span></code></dt><dd><p>If set to <code class="code docutils literal notranslate"><span class="pre">NO</span></code> the automatic scanning of networks is disabled.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">EPICS_CA_CONN_TMO</span></code></dt><dd><p>Connection timeout, 30 seconds by default.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">EPICS_CA_BEACON_PERIOD</span></code></dt><dd><p>Beacon polling period, 15 seconds by default.</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">EPICS_CA_SERVER_PORT</span></code>, <code class="code docutils literal notranslate"><span class="pre">EPICS_CA_REPEATER_PORT</span></code></dt><dd><p>Set these to configure the ports used to connect to channel access.  By
default ports 5064 and 5065 are used respectively.</p>
</dd>
</dl>
<p>Example code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;EPICS_CA_MAX_ARRAY_BYTES&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;1000000&#39;</span>

<span class="c1"># Note: the first import of catools must come after the environ is set up.</span>
<span class="kn">from</span> <span class="nn">cothread.catools</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</section>
<section id="function-reference">
<h2>Function Reference<a class="headerlink" href="#function-reference" title="Link to this heading">#</a></h2>
<p>The <code class="code docutils literal notranslate"><span class="pre">catools</span></code> API consists of the three functions <a class="reference internal" href="#cothread.catools.caput" title="cothread.catools.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a>,
<a class="reference internal" href="#cothread.catools.caget" title="cothread.catools.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">caget()</span></code></a> and <a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a> together with an auxilliary
<a class="reference internal" href="#cothread.catools.connect" title="cothread.catools.connect"><code class="xref py py-func docutils literal notranslate"><span class="pre">connect()</span></code></a> function.  The functions <a class="reference internal" href="#cothread.catools.caget" title="cothread.catools.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">caget()</span></code></a> and <a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a>
return or deliver “augmented” values which are documented in more detail in
the section <a class="reference internal" href="#values"><span class="std std-ref">Working with Values</span></a>.</p>
<section id="common-notes">
<span id="common"></span><h3>Common Notes<a class="headerlink" href="#common-notes" title="Link to this heading">#</a></h3>
<p>All four functions take an argument <code class="code docutils literal notranslate"><span class="pre">pvs</span></code> which can specify the name of a
single PV or can be a list of PVs.  In all cases the returned result has the
same “shape” as the <code class="code docutils literal notranslate"><span class="pre">pvs</span></code> argument, in other words, if <code class="code docutils literal notranslate"><span class="pre">pvs</span></code> is a single
string then a single value (error code, value, or subscription) is returned,
and if <code class="code docutils literal notranslate"><span class="pre">pvs</span></code> is a list then a list of exactly the same length is returned.</p>
<p>In general there are advantages to calling <a class="reference internal" href="#cothread.catools.caput" title="cothread.catools.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a>, <a class="reference internal" href="#cothread.catools.caget" title="cothread.catools.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">caget()</span></code></a> or
<a class="reference internal" href="#cothread.catools.connect" title="cothread.catools.connect"><code class="xref py py-func docutils literal notranslate"><span class="pre">connect()</span></code></a> on a list of PVs, as in this case the channel connection and
access delays will occur in parallel.</p>
<p>Several arguments are common through this API: <a class="reference internal" href="#throw"><span class="std std-ref">throw</span></a> determines how errors
are handled, <a class="reference internal" href="#timeout"><span class="std std-ref">timeout</span></a> determines timeouts, and finally <code class="docutils literal notranslate"><span class="pre">datatype</span></code>, <code class="docutils literal notranslate"><span class="pre">format</span></code>
and <code class="docutils literal notranslate"><span class="pre">count</span></code> determine data formats and are documented in <a class="reference internal" href="#augmented"><span class="std std-ref">Augmented Values</span></a>.</p>
<dl id="timeout">
<dt><code class="docutils literal notranslate"><span class="pre">timeout</span></code></dt><dd><p>The <a class="reference internal" href="#timeout"><span class="std std-ref">timeout</span></a> argument specified how long <a class="reference internal" href="#cothread.catools.caput" title="cothread.catools.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a> or <a class="reference internal" href="#cothread.catools.caget" title="cothread.catools.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">caget()</span></code></a>
will wait for the entire operation to complete.  This timeout is in seconds,
and can be one of several formats: a timeout interval in seconds, an
absolute deadline (in <a class="reference external" href="https://docs.python.org/3/library/time.html#time.time" title="(in Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.time()</span></code></a> format) as a single element tuple,
or None to specify that no timeout will occur.  Note that a timeout of 0
will timeout immediately if any waiting is required.</p>
<p>If a timeout occurs then a <a class="reference internal" href="cothread.html#cothread.Timedout" title="cothread.Timedout"><code class="xref py py-exc docutils literal notranslate"><span class="pre">Timedout</span></code></a> exception will be raised unless
<code class="docutils literal notranslate"><span class="pre">throw=False</span></code> has been set.</p>
</dd>
</dl>
<dl class="simple" id="throw">
<dt><code class="docutils literal notranslate"><span class="pre">throw</span></code></dt><dd><p>This parameter determines the behaviour of <a class="reference internal" href="#cothread.catools.caget" title="cothread.catools.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">caget()</span></code></a>, <a class="reference internal" href="#cothread.catools.caput" title="cothread.catools.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a>, and
<a class="reference internal" href="#cothread.catools.connect" title="cothread.catools.connect"><code class="xref py py-func docutils literal notranslate"><span class="pre">connect()</span></code></a> when an error occurs.  If <code class="docutils literal notranslate"><span class="pre">throw=True</span></code> (the default) is
set then an exception is raised, otherwise if <code class="docutils literal notranslate"><span class="pre">False</span></code> is specified an
error code value is returned for each failing PV.</p>
</dd>
</dl>
</section>
<section id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="cothread.catools.caput">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">caput</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">repeat_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datatype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wait</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">throw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cothread.catools.caput" title="Link to this definition">#</a></dt>
<dd><p>Writes values to one or more PVs.  If <code class="docutils literal notranslate"><span class="pre">pvs</span></code> is a single string then
<code class="docutils literal notranslate"><span class="pre">values</span></code> is treated as a single value to be written to the named process
variable, otherwise <code class="docutils literal notranslate"><span class="pre">pvs</span></code> must be iterable, and unless <code class="docutils literal notranslate"><span class="pre">repeat_value=True</span></code>
is set, <code class="docutils literal notranslate"><span class="pre">values</span></code> must also be an iterable of the same length in which case
<code class="docutils literal notranslate"><span class="pre">values[i]</span></code> is written to <code class="docutils literal notranslate"><span class="pre">pvs[i]</span></code>.  Otherwise, if a single value is given
or if <code class="docutils literal notranslate"><span class="pre">repeat_value=True</span></code> is specified, <code class="docutils literal notranslate"><span class="pre">values</span></code> is written to all PVs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>repeat_value</strong> – When writing a value to a list of PVs ensures that
<code class="docutils literal notranslate"><span class="pre">values</span></code> is treated as a single value to be written to each PV.</p></li>
<li><p><strong>datatype</strong> – See documentation for <a class="reference internal" href="#augmented"><span class="std std-ref">Augmented Values</span></a> below.  Used to force
transmitted data to the requested format, or select special alarm
acknowledgement handling.  Note that only standard Python type
conversion will be done, in particular conversion to and from strings
is <em>not</em> automatic.</p></li>
<li><p><strong>wait</strong> – If <code class="docutils literal notranslate"><span class="pre">wait=True</span></code> is specified then channel access put with
callback is invoked, and the <a class="reference internal" href="#cothread.catools.caput" title="cothread.catools.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a> operation will wait until the
server acknowledges successful completion before returning.</p></li>
<li><p><strong>callback</strong> – If a <code class="docutils literal notranslate"><span class="pre">callback</span></code> is specified then channel access put with callback
is invoked and the given <code class="docutils literal notranslate"><span class="pre">callback</span></code> function will be called with the put
response as a <a class="reference internal" href="#cothread.catools.ca_nothing" title="cothread.catools.ca_nothing"><code class="xref py py-class docutils literal notranslate"><span class="pre">ca_nothing</span></code></a> object passed as the only argument.  All
<a class="reference internal" href="#cothread.catools.caput" title="cothread.catools.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a> callbacks will will be called on a dedicated caput
callback thread.
Unless <code class="docutils literal notranslate"><span class="pre">wait</span></code> is specified the call to <a class="reference internal" href="#cothread.catools.caput" title="cothread.catools.caput"><code class="xref any py py-func docutils literal notranslate"><span class="pre">caput</span></code></a> will complete as soon
as the caput has been initiated.  If <code class="docutils literal notranslate"><span class="pre">wait</span></code> is specified, whether
<a class="reference internal" href="#cothread.catools.caput" title="cothread.catools.caput"><code class="xref any py py-func docutils literal notranslate"><span class="pre">caput</span></code></a> returns before or after <a class="reference external" href="https://docs.python.org/3/glossary.html#term-callback" title="(in Python v3.11)"><code class="xref any docutils literal notranslate"><span class="pre">callback</span></code></a> is called is unpredictable.</p></li>
<li><p><strong>timeout</strong> – Documented in <a class="reference internal" href="#common"><span class="std std-ref">Common Notes</span></a> above.</p></li>
<li><p><strong>throw</strong> – Documented in <a class="reference internal" href="#common"><span class="std std-ref">Common Notes</span></a> above.</p></li>
</ul>
</dd>
</dl>
<p>The return value from <a class="reference internal" href="#cothread.catools.caput" title="cothread.catools.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a> is either a list or a single value,
depending on the shape of <code class="code docutils literal notranslate"><span class="pre">pvs</span></code>.  For each PV a <a class="reference internal" href="#cothread.catools.ca_nothing" title="cothread.catools.ca_nothing"><code class="xref py py-class docutils literal notranslate"><span class="pre">ca_nothing</span></code></a> success
code is returned on success, otherwise either an exception is raised or an
appropriate error code is returned for each failing PV if <code class="docutils literal notranslate"><span class="pre">throw=True</span></code> is
set.  The return code can be tested for boolean success, so for example it
is possible to write:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">caput</span><span class="p">(</span><span class="n">pv</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">throw</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="c1"># process caput error</span>
</pre></div>
</div>
<p>If all the PVs listed in <code class="code docutils literal notranslate"><span class="pre">pvs</span></code> have already been connected, through a
successful call to any <a class="reference internal" href="#module-cothread.catools" title="cothread.catools"><code class="xref py py-mod docutils literal notranslate"><span class="pre">catools</span></code></a> method, then the library guarantees
that the puts for each PV will occur strictly in sequence.  For any PVs
which need a connection to be established the order of execution of puts
is completely undefined.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cothread.catools.caget">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">caget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datatype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">FORMAT_RAW</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">throw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cothread.catools.caget" title="Link to this definition">#</a></dt>
<dd><p>Retrieves a value from one or more PVs.  If <code class="code docutils literal notranslate"><span class="pre">pvs</span></code> is a single string then
a single value is returned, otherwise a list of values is returned.  Each
value returned is an <a class="reference internal" href="#augmented"><span class="std std-ref">Augmented Values</span></a>, see below for details.</p>
<p>If <code class="xref py py-attr docutils literal notranslate"><span class="pre">.ok</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code> then the <a class="reference internal" href="#cothread.catools.ca_nothing..errorcode" title="cothread.catools.ca_nothing..errorcode"><code class="xref py py-attr docutils literal notranslate"><span class="pre">errorcode</span></code></a> field is set
to the appropriate <code class="docutils literal notranslate"><span class="pre">ECA_</span></code> error code and <code class="docutils literal notranslate"><span class="pre">str(value)</span></code> will return
an error message.</p>
<p>The various arguments control the behaviour of <a class="reference internal" href="#cothread.catools.caget" title="cothread.catools.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">caget()</span></code></a> as follows:</p>
<dl class="simple">
<dt><a class="reference internal" href="#augmented-datatype"><span class="std std-ref">datatype</span></a>, <a class="reference internal" href="#augmented-format"><span class="std std-ref">format</span></a>, <a class="reference internal" href="#augmented-count"><span class="std std-ref">count</span></a></dt><dd><p>See documentation for <a class="reference internal" href="#augmented"><span class="std std-ref">Augmented Values</span></a> below.</p>
</dd>
<dt><a class="reference internal" href="#timeout"><span class="std std-ref">timeout</span></a>, <a class="reference internal" href="#throw"><span class="std std-ref">throw</span></a></dt><dd><p>Documented in <a class="reference internal" href="#common"><span class="std std-ref">Common Notes</span></a> above.  If a value cannot be retrieved
and <code class="docutils literal notranslate"><span class="pre">throw=False</span></code> is set then for each failing PV an empty value with
<code class="docutils literal notranslate"><span class="pre">.ok==False</span></code> is returned.</p>
</dd>
</dl>
<p>The format of values returned depends on the number of values requested
for each PV.  If only one value is requested then the value is returned
as a scalar, otherwise as a numpy array.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cothread.catools.camonitor">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">camonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datatype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">FORMAT_RAW</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_updates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">notify_disconnect</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cothread.catools.camonitor" title="Link to this definition">#</a></dt>
<dd><p>Creates a subscription to one or more PVs, returning a subscription
object for each PV.  If a single PV is given then a single subscription
object is returned, otherwise a list of subscriptions is returned.</p>
<p>Subscriptions will remain active until the <a class="reference internal" href="#cothread.pv.PV.close" title="cothread.pv.PV.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> method is called
on the returned subscription object.</p>
<p>The precise way in which the callback routine is called on updates
depends on whether <code class="code docutils literal notranslate"><span class="pre">pvs</span></code> is a single name or a list of names.  If it is
single name then it is called as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">callback</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<p>for each update.  If <code class="code docutils literal notranslate"><span class="pre">pvs</span></code> is a list of names then each update is
reported as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">callback</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">index</span></code> is the position in the original array of PVs of the PV
generating this update.  The values passed to <a class="reference external" href="https://docs.python.org/3/glossary.html#term-callback" title="(in Python v3.11)"><code class="xref any docutils literal notranslate"><span class="pre">callback</span></code></a> are
<a class="reference internal" href="#augmented"><span class="std std-ref">Augmented Values</span></a>.</p>
<p>The parameters modify the behaviour as follows:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>events</strong> – <p>This identifies the type of update which will be notified.  A
bit-wise or of any the following are possible:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Flag</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DBE_VALUE</p></td>
<td><p>Notify normal value changes</p></td>
</tr>
<tr class="row-odd"><td><p>DBE_LOG</p></td>
<td><p>Notify archive value changes</p></td>
</tr>
<tr class="row-even"><td><p>DBE_ALARM</p></td>
<td><p>Notify alarm state changes</p></td>
</tr>
<tr class="row-odd"><td><p>DBE_PROPERTY</p></td>
<td><p>Notify property changes
(on 3.14.11 and later servers)</p></td>
</tr>
</tbody>
</table>
<p>If <code class="docutils literal notranslate"><span class="pre">events</span></code> is not specified then the default value depends on the value
selected for <a class="reference external" href="https://docs.python.org/3/library/functions.html#format" title="(in Python v3.11)"><code class="xref any docutils literal notranslate"><span class="pre">format</span></code></a> as follows:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#format" title="(in Python v3.11)"><code class="xref any docutils literal notranslate"><span class="pre">format</span></code></a></p></th>
<th class="head"><p>Default value for <code class="docutils literal notranslate"><span class="pre">events</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FORMAT_RAW</p></td>
<td><p>DBE_VALUE</p></td>
</tr>
<tr class="row-odd"><td><p>FORMAT_TIME</p></td>
<td><p>DBE_VALUE | DBE_ALARM</p></td>
</tr>
<tr class="row-even"><td><p>FORMAT_CTRL</p></td>
<td><p>DBE_VALUE | DBE_ALARM | DBE_PROPERTY</p></td>
</tr>
</tbody>
</table>
</p></li>
<li><p><strong>datatype</strong> – See documentation for <a class="reference internal" href="#augmented"><span class="std std-ref">Augmented Values</span></a> below.</p></li>
<li><p><strong>format</strong> – See documentation for <a class="reference internal" href="#augmented"><span class="std std-ref">Augmented Values</span></a> below.</p></li>
<li><p><strong>count</strong> – See documentation for <a class="reference internal" href="#augmented"><span class="std std-ref">Augmented Values</span></a> below.</p></li>
<li><p><strong>all_updates</strong> – <p>If this is <code class="docutils literal notranslate"><span class="pre">True</span></code> then every update received from channel
access will be delivered to the callback, otherwise multiple updates
received between callback queue dispatches will be merged into the
most recent value.</p>
<p>If updates are being merged then the value returned will be augmented
with a field <code class="docutils literal notranslate"><span class="pre">.update_count</span></code> recording how many updates occurred
on this value.</p>
</p></li>
<li><p><strong>notify_disconnect</strong> – If this is <code class="docutils literal notranslate"><span class="pre">True</span></code> then IOC disconnect events and channel access
error reports will be reported by calling the callback with a
<a class="reference internal" href="#cothread.catools.ca_nothing" title="cothread.catools.ca_nothing"><code class="xref py py-class docutils literal notranslate"><span class="pre">ca_nothing</span></code></a> error with <code class="xref py py-attr docutils literal notranslate"><span class="pre">.ok</span></code> <code class="docutils literal notranslate"><span class="pre">False</span></code>.  By default
these notifications are suppressed so that only valid values will be
passed to the callback routine.</p></li>
<li><p><strong>connect_timeout</strong> – If a connection timeout is specified then the <a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a> will
report a disconnection event after the specified interval if connection
has not completed by this time.  Note that this notification will be
made even if notify_disconnect is False, and that if the PV subsequently
connects it will update as normal.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cothread.catools.connect">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cainfo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wait</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">throw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cothread.catools.connect" title="Link to this definition">#</a></dt>
<dd><p>Establishes a connection to one or more PVs, optionally returning detailed
information about the connection.  A single PV or a list of PVs can be
given.  This does not normally need to be called, as the <code class="docutils literal notranslate"><span class="pre">ca...</span></code>
routines will establish their own connections as required, but after a
successful connection we can guarantee that <code class="docutils literal notranslate"><span class="pre">caput(...,</span> <span class="pre">wait=False)</span></code> will
complete immediately without suspension and that <code class="docutils literal notranslate"><span class="pre">caput(pvs,</span> <span class="pre">values)</span></code> will
execute in order if all PVs in <code class="code docutils literal notranslate"><span class="pre">pvs</span></code> have been successfully connected.</p>
<p>It is possible to test whether a channel has successfully connected without
provoking suspension by calling <code class="docutils literal notranslate"><span class="pre">connect(pv,</span> <span class="pre">wait=False,</span> <span class="pre">cainfo=True)</span></code>
and testing the <a class="reference internal" href="#cothread.catools.ca_info..state" title="cothread.catools.ca_info..state"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state</span></code></a> attribute of the result.</p>
<p>The various arguments control the behaviour of <a class="reference internal" href="#cothread.catools.connect" title="cothread.catools.connect"><code class="xref py py-func docutils literal notranslate"><span class="pre">connect()</span></code></a> as follows:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wait</strong> – Normally the <a class="reference internal" href="#cothread.catools.connect" title="cothread.catools.connect"><code class="xref py py-func docutils literal notranslate"><span class="pre">connect()</span></code></a> routine will not return until the requested
connection is established.  If <code class="docutils literal notranslate"><span class="pre">wait=False</span></code> is set then a connection
request will be queued and <a class="reference internal" href="#cothread.catools.connect" title="cothread.catools.connect"><code class="xref py py-func docutils literal notranslate"><span class="pre">connect()</span></code></a> will unconditionally succeed.</p></li>
<li><p><strong>cainfo</strong> – <p>By default a simple <a class="reference internal" href="#cothread.catools.ca_nothing" title="cothread.catools.ca_nothing"><code class="xref py py-class docutils literal notranslate"><span class="pre">ca_nothing</span></code></a> value is returned, but if
<code class="docutils literal notranslate"><span class="pre">cainfo=True</span></code> is set then a <a class="reference internal" href="#cothread.catools.ca_info" title="cothread.catools.ca_info"><code class="xref py py-class docutils literal notranslate"><span class="pre">ca_info</span></code></a> structure is returned.</p>
<dl class="py class">
<dt class="sig sig-object py" id="cothread.catools.ca_info">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">ca_info</span></span><a class="headerlink" href="#cothread.catools.ca_info" title="Link to this definition">#</a></dt>
<dd><p>The following dynamic attributes record information about the
channel access connection:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools.ca_info..ok">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">ok</span></span><a class="headerlink" href="#cothread.catools.ca_info..ok" title="Link to this definition">#</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">True</span></code> iff the channel was successfully connected.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools.ca_info..name">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#cothread.catools.ca_info..name" title="Link to this definition">#</a></dt>
<dd><p>Name of PV.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools.ca_info..state">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">state</span></span><a class="headerlink" href="#cothread.catools.ca_info..state" title="Link to this definition">#</a></dt>
<dd><p>State of channel as an integer.  Look up
<code class="docutils literal notranslate"><span class="pre">.state_strings[.state]</span></code> for textual description.  A value of
2 indicates a currently connected PV.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools.ca_info..host">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">host</span></span><a class="headerlink" href="#cothread.catools.ca_info..host" title="Link to this definition">#</a></dt>
<dd><p>Host name and port of server providing this PV.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools.ca_info..read">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">read</span></span><a class="headerlink" href="#cothread.catools.ca_info..read" title="Link to this definition">#</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">True</span></code> iff read access to this PV is allowed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools.ca_info..write">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">write</span></span><a class="headerlink" href="#cothread.catools.ca_info..write" title="Link to this definition">#</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">True</span></code> iff write access to this PV is allowed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools.ca_info..count">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">count</span></span><a class="headerlink" href="#cothread.catools.ca_info..count" title="Link to this definition">#</a></dt>
<dd><p>Data count of this channel, length of the associated data array.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools.ca_info..datatype">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">datatype</span></span><a class="headerlink" href="#cothread.catools.ca_info..datatype" title="Link to this definition">#</a></dt>
<dd><p>Underlying channel datatype as <code class="docutils literal notranslate"><span class="pre">DBR_</span></code> value.  Look up
<code class="docutils literal notranslate"><span class="pre">.datatype_strings[.datatype]</span></code> for description.</p>
</dd></dl>

<p>The following static attributes are provided to help with
interpretation of the dynamic attributes:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools.ca_info..state_strings">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">state_strings</span></span><a class="headerlink" href="#cothread.catools.ca_info..state_strings" title="Link to this definition">#</a></dt>
<dd><p>Converts <a class="reference internal" href="#cothread.catools.ca_info..state" title="cothread.catools.ca_info..state"><code class="xref py py-attr docutils literal notranslate"><span class="pre">state</span></code></a> into a printable description of the
connection state.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools.ca_info..datatype_strings">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">datatype_strings</span></span><a class="headerlink" href="#cothread.catools.ca_info..datatype_strings" title="Link to this definition">#</a></dt>
<dd><p>Textual descriptions of the possible channel data types, can be
used to convert <a class="reference internal" href="#augmented-datatype"><span class="std std-ref">.datatype</span></a> into a printable string.</p>
</dd></dl>

</dd></dl>

<p>The <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> representation of this structure can be printed to
produce output similar to that produced by the <code class="docutils literal notranslate"><span class="pre">cainfo</span></code> command line
tool.</p>
</p></li>
<li><p><strong>timeout</strong> – Documented in <a class="reference internal" href="#common"><span class="std std-ref">Common Notes</span></a> above.  If a value cannot be retrieved
and <code class="docutils literal notranslate"><span class="pre">throw=False</span></code> is set then for each failing PV an empty value with
<code class="docutils literal notranslate"><span class="pre">.ok==False</span></code> is returned.</p></li>
<li><p><strong>throw</strong> – Documented in <a class="reference internal" href="#common"><span class="std std-ref">Common Notes</span></a> above.  If a value cannot be retrieved
and <code class="docutils literal notranslate"><span class="pre">throw=False</span></code> is set then for each failing PV an empty value with
<code class="docutils literal notranslate"><span class="pre">.ok==False</span></code> is returned.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cothread.catools.cainfo">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">cainfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">throw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cothread.catools.cainfo" title="Link to this definition">#</a></dt>
<dd><p>This is an alias for <a class="reference internal" href="#cothread.catools.connect" title="cothread.catools.connect"><code class="xref py py-func docutils literal notranslate"><span class="pre">connect()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">cainfo</span></code> and <code class="docutils literal notranslate"><span class="pre">wait</span></code> set to
<code class="docutils literal notranslate"><span class="pre">True</span></code>.  Returns a <a class="reference internal" href="#cothread.catools.ca_info" title="cothread.catools.ca_info"><code class="xref py py-class docutils literal notranslate"><span class="pre">ca_info</span></code></a> structure containing information about
the connected PV or a list of structures, as appropriate.</p>
</dd></dl>

</section>
</section>
<section id="working-with-values">
<span id="values"></span><h2>Working with Values<a class="headerlink" href="#working-with-values" title="Link to this heading">#</a></h2>
<p>There are two types of values returned by <a class="reference internal" href="#module-cothread.catools" title="cothread.catools"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cothread.catools</span></code></a> functions:
“augmented values” and “error codes”.  The <a class="reference internal" href="#cothread.catools.caput" title="cothread.catools.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a> function only returns
an error code value (which may indicate success), while <a class="reference internal" href="#cothread.catools.caget" title="cothread.catools.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">caget()</span></code></a> and
<a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a> will normally return (or deliver) augmented values, but will
return (or deliver) an error code on failure.</p>
<p>The following fields are common to both types of value.  This means that is is
always safe to test <code class="docutils literal notranslate"><span class="pre">value.ok</span></code> for a value returned by <a class="reference internal" href="#cothread.catools.caget" title="cothread.catools.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">caget()</span></code></a> or
<a class="reference internal" href="#cothread.catools.caput" title="cothread.catools.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a> or delivered by <a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools..ok">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">ok</span></span><a class="headerlink" href="#cothread.catools..ok" title="Link to this definition">#</a></dt>
<dd><p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> if the data is good, <code class="docutils literal notranslate"><span class="pre">False</span></code> if there was an
error.  For augmented values <code class="xref py py-attr docutils literal notranslate"><span class="pre">.ok</span></code> is always set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools..name">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#cothread.catools..name" title="Link to this definition">#</a></dt>
<dd><p>Name of the pv.</p>
</dd></dl>

<p>If <code class="xref py py-attr docutils literal notranslate"><span class="pre">.ok</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code> then two further attributes are set (see
<a class="reference internal" href="#augmented"><span class="std std-ref">Augmented Values</span></a> for further details):</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools..datatype">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">datatype</span></span><a class="headerlink" href="#cothread.catools..datatype" title="Link to this definition">#</a></dt>
<dd><p>Underlying EPICS data type.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools..element_count">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">element_count</span></span><a class="headerlink" href="#cothread.catools..element_count" title="Link to this definition">#</a></dt>
<dd><p>Underlying EPICS length.  This is typically determined by record support at
database loading type, for instance for <code class="docutils literal notranslate"><span class="pre">waveform</span></code> records this is
the value in the <code class="docutils literal notranslate"><span class="pre">.NELM</span></code> field.</p>
<p>Note that this determines the maximum length of the associated data array,
but the returned data may be shorter, for instance the <code class="docutils literal notranslate"><span class="pre">.NORD</span></code> field
of a <code class="docutils literal notranslate"><span class="pre">waveform</span></code> record can determine a shorter length.</p>
</dd></dl>

<section id="values-and-their-types">
<h3>Values and their Types<a class="headerlink" href="#values-and-their-types" title="Link to this heading">#</a></h3>
<p>The type of values returned by <a class="reference internal" href="#cothread.catools.caget" title="cothread.catools.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">caget()</span></code></a> or delivered by <a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a>
callbacks is determined by the requested datatype in the original <a class="reference internal" href="#cothread.catools.caget" title="cothread.catools.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">caget()</span></code></a>
or <a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a> call together with the underlying length of the requested
EPICS field.</p>
<p>If the underlying length (<code class="xref py py-attr docutils literal notranslate"><span class="pre">.element_count</span></code>) of the EPICS value is 1 then
the value will be returned as a Python scalar, and will be one of the three
basic scalar types (string, integer or floating point number), but wrapped as an
augmented type.</p>
<p>If on the other hand <code class="xref py py-attr docutils literal notranslate"><span class="pre">.element_count</span></code> is not 1 then the value is treated
as an array and is always returned as a numpy array, again wrapped as an
augmented type.  Note that this means that even if <code class="docutils literal notranslate"><span class="pre">caget(pv,</span> <span class="pre">count=1)</span></code> is
used to fetch a value with one element, if the underlying PV is an array then
the result returned will be an array.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an incompatible change in behaviour from previous versions of
cothread.  Previously whether to return a value as an array or a scalar was
determined purely by the length of the retrieved data, now it is determined
by the underlying length of the EPICS source, ie by its
<code class="xref py py-attr docutils literal notranslate"><span class="pre">.element_count</span></code> value.</p>
</div>
<p>The table below enumerates the possibilities:</p>
<blockquote>
<div><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Cothread type</p></th>
<th class="head"><p>Derived from</p></th>
<th class="head"><p>For these values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#cothread.catools.cothread.dbr.ca_str" title="cothread.catools.cothread.dbr.ca_str"><code class="xref py py-class docutils literal notranslate"><span class="pre">ca_str</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>String value</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#cothread.catools.cothread.dbr.ca_int" title="cothread.catools.cothread.dbr.ca_int"><code class="xref py py-class docutils literal notranslate"><span class="pre">ca_int</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p></td>
<td><p>Integral value</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#cothread.catools.cothread.dbr.ca_float" title="cothread.catools.cothread.dbr.ca_float"><code class="xref py py-class docutils literal notranslate"><span class="pre">ca_float</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p></td>
<td><p>Floating point value</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#cothread.catools.cothread.dbr.ca_array" title="cothread.catools.cothread.dbr.ca_array"><code class="xref py py-class docutils literal notranslate"><span class="pre">ca_array</span></code></a></p></td>
<td><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a></p></td>
<td><p>Any array value</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="cothread.catools.cothread.dbr.ca_str">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cothread.dbr.</span></span><span class="sig-name descname"><span class="pre">ca_str</span></span><a class="headerlink" href="#cothread.catools.cothread.dbr.ca_str" title="Link to this definition">#</a></dt>
<dd><p>Scalar type derived from basic Python type.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="cothread.catools.cothread.dbr.ca_int">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cothread.dbr.</span></span><span class="sig-name descname"><span class="pre">ca_int</span></span><a class="headerlink" href="#cothread.catools.cothread.dbr.ca_int" title="Link to this definition">#</a></dt>
<dd><p>Scalar type derived from basic Python type.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="cothread.catools.cothread.dbr.ca_float">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cothread.dbr.</span></span><span class="sig-name descname"><span class="pre">ca_float</span></span><a class="headerlink" href="#cothread.catools.cothread.dbr.ca_float" title="Link to this definition">#</a></dt>
<dd><p>Scalar type derived from basic Python type.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="cothread.catools.cothread.dbr.ca_array">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cothread.dbr.</span></span><span class="sig-name descname"><span class="pre">ca_array</span></span><a class="headerlink" href="#cothread.catools.cothread.dbr.ca_array" title="Link to this definition">#</a></dt>
<dd><p>Array type derived from <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>.  The associated
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.dtype.html#numpy.ndarray.dtype" title="(in NumPy v1.26)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">dtype</span></code></a> will be as close a fit to the underlying data as possible.</p>
</dd></dl>

</section>
<section id="augmented-values">
<span id="augmented"></span><h3>Augmented Values<a class="headerlink" href="#augmented-values" title="Link to this heading">#</a></h3>
<p>Augmented values are normally Python or <a class="reference external" href="https://numpy.org/doc/stable/reference/index.html#module-numpy" title="(in NumPy v1.26)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code></a> values with extra fields:
the <code class="xref py py-attr docutils literal notranslate"><span class="pre">.ok</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">.name</span></code> fields are already mentioned above, and
further extra fields will be present depending on format requested for the data.
As pointed out above, <code class="xref py py-attr docutils literal notranslate"><span class="pre">.ok</span></code> is always <code class="docutils literal notranslate"><span class="pre">True</span></code> for valid data.</p>
<p>Four different types of augmented value are returned: strings, integers,
floating point numbers or arrays, depending on the length of the data
requested – an array is only used when the data length is &gt;1.</p>
<p>In almost all circumstances an augmented value will behave exactly like a
normal value, but there are a few rare cases where differences in behaviour are
observed (these are mostly bugs).  If this occurs the augumentation can be
stripped from an augmented value <code class="docutils literal notranslate"><span class="pre">value</span></code> by writing <code class="docutils literal notranslate"><span class="pre">+value</span></code> – this returns
the underlying value.</p>
<p>The type of augmented values is determined both by parameters passed to
<a class="reference internal" href="#cothread.catools.caget" title="cothread.catools.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">caget()</span></code></a> and <a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a> and by the underlying datatype.  Both of
these functions share parameters <a class="reference internal" href="#augmented-datatype"><span class="std std-ref">datatype</span></a>,
<a class="reference internal" href="#augmented-format"><span class="std std-ref">format</span></a> and <a class="reference internal" href="#augmented-count"><span class="std std-ref">count</span></a> which can be used to
control the type of the data returned:</p>
<dl id="augmented-datatype">
<dt><code class="docutils literal notranslate"><span class="pre">datatype</span></code></dt><dd><p>For <a class="reference internal" href="#cothread.catools.caget" title="cothread.catools.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">caget()</span></code></a> and <a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a> this controls the format of the
data that will be requested, while for <a class="reference internal" href="#cothread.catools.caput" title="cothread.catools.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a> the data will be
coerced into the requested format.  <code class="docutils literal notranslate"><span class="pre">datatype</span></code> can be any of the
following:</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">None</span></code> (the default).  In this case the “native” datatype
provided by the channel will be returned.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">DBR_</span></code> value, one of the following:</p>
<dl class="py data">
<dt class="sig sig-object py" id="cothread.catools.DBR_STRING">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">DBR_STRING</span></span><a class="headerlink" href="#cothread.catools.DBR_STRING" title="Link to this definition">#</a></dt>
<dd><p>Strings are up to 39 characters long – this is a constraint set
by EPICS.  For longer strings see <code class="docutils literal notranslate"><span class="pre">DBR_CHAR_STR</span></code>.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="cothread.catools.DBR_CHAR_STR">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">DBR_CHAR_STR</span></span><a class="headerlink" href="#cothread.catools.DBR_CHAR_STR" title="Link to this definition">#</a></dt>
<dd><p>Read an array and interpret it as a Python string.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="cothread.catools.DBR_CHAR">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">DBR_CHAR</span></span><a class="headerlink" href="#cothread.catools.DBR_CHAR" title="Link to this definition">#</a></dt>
<dt class="sig sig-object py" id="cothread.catools.DBR_SHORT">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">DBR_SHORT</span></span><a class="headerlink" href="#cothread.catools.DBR_SHORT" title="Link to this definition">#</a></dt>
<dt class="sig sig-object py" id="cothread.catools.DBR_LONG">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">DBR_LONG</span></span><a class="headerlink" href="#cothread.catools.DBR_LONG" title="Link to this definition">#</a></dt>
<dd><p>These are all signed integer types, with 8, 16 and 32 bit values
respectively.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="cothread.catools.DBR_FLOAT">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">DBR_FLOAT</span></span><a class="headerlink" href="#cothread.catools.DBR_FLOAT" title="Link to this definition">#</a></dt>
<dt class="sig sig-object py" id="cothread.catools.DBR_DOUBLE">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">DBR_DOUBLE</span></span><a class="headerlink" href="#cothread.catools.DBR_DOUBLE" title="Link to this definition">#</a></dt>
<dd><p>Floating point values with 32 and 64 bit values, respectively.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="cothread.catools.DBR_ENUM">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">DBR_ENUM</span></span><a class="headerlink" href="#cothread.catools.DBR_ENUM" title="Link to this definition">#</a></dt>
<dd><p>A 16 bit unsigned integer value representing an index into an
array of strings.  The associated strings can be retrieved by
using <code class="docutils literal notranslate"><span class="pre">format=FORMAT_CTRL</span></code> and inspecting the <a class="reference internal" href="#cothread.catools..enums" title="cothread.catools..enums"><code class="xref py py-attr docutils literal notranslate"><span class="pre">enums</span></code></a>
field.</p>
</dd></dl>

</li>
<li><p>A python type compatible with any of the above values, such as
<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>.  These correspond to
<a class="reference internal" href="#cothread.catools.DBR_LONG" title="cothread.catools.DBR_LONG"><code class="xref py py-const docutils literal notranslate"><span class="pre">DBR_LONG</span></code></a>, <a class="reference internal" href="#cothread.catools.DBR_DOUBLE" title="cothread.catools.DBR_DOUBLE"><code class="xref py py-const docutils literal notranslate"><span class="pre">DBR_DOUBLE</span></code></a> and <a class="reference internal" href="#cothread.catools.DBR_STRING" title="cothread.catools.DBR_STRING"><code class="xref py py-const docutils literal notranslate"><span class="pre">DBR_STRING</span></code></a>
respectively.</p></li>
<li><p>Any <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.dtype</span></code></a> compatible with any of the above values.</p></li>
<li><p>One of the special values <code class="docutils literal notranslate"><span class="pre">DBR_CHAR_STR</span></code>, or <code class="docutils literal notranslate"><span class="pre">DBR_CHAR_BYTES</span></code>.
This is used to request a char array which is then converted to a Python
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> string on receipt.  It is not
sensible to specify <a class="reference internal" href="#cothread.catools.ca_info..count" title="cothread.catools.ca_info..count"><code class="xref any py py-attr docutils literal notranslate"><span class="pre">count</span></code></a> with this option.  The option
<code class="docutils literal notranslate"><span class="pre">DBR_CHAR_BYTES</span></code> is meaningless and not supported for <a class="reference internal" href="#cothread.catools.caput" title="cothread.catools.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a>.</p>
<p>Note that if the PV name ends in <code class="docutils literal notranslate"><span class="pre">$</span></code> and <a class="reference internal" href="#augmented-datatype"><span class="std std-ref">datatype</span></a> is not specified
then <code class="docutils literal notranslate"><span class="pre">DBR_CHAR_STR</span></code> will be used.</p>
</li>
<li><p>The special value <code class="docutils literal notranslate"><span class="pre">DBR_ENUM_STR</span></code>, only for <a class="reference internal" href="#cothread.catools.caget" title="cothread.catools.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">caget()</span></code></a> and
<a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a>.  In this case the “native” channel datatype is used
unless the channel is an enumeration, in which case the corresponding
string is returned.</p></li>
<li><p>For <a class="reference internal" href="#cothread.catools.caget" title="cothread.catools.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">caget()</span></code></a> and <a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a> two further special values are
supported.  In both of these cases <a class="reference external" href="https://docs.python.org/3/library/functions.html#format" title="(in Python v3.11)"><code class="xref any docutils literal notranslate"><span class="pre">format</span></code></a> is ignored:</p>
<dl class="py data">
<dt class="sig sig-object py" id="cothread.catools.DBR_STSACK_STRING">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">DBR_STSACK_STRING</span></span><a class="headerlink" href="#cothread.catools.DBR_STSACK_STRING" title="Link to this definition">#</a></dt>
<dd><p>Returns the current value as a string together with extra fields
<a class="reference internal" href="#cothread.catools..status" title="cothread.catools..status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a>, <a class="reference internal" href="#cothread.catools..severity" title="cothread.catools..severity"><code class="xref py py-attr docutils literal notranslate"><span class="pre">severity</span></code></a>,
<a class="reference internal" href="#cothread.catools..ackt" title="cothread.catools..ackt"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ackt</span></code></a>, <a class="reference internal" href="#cothread.catools..acks" title="cothread.catools..acks"><code class="xref py py-attr docutils literal notranslate"><span class="pre">acks</span></code></a>.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="cothread.catools.DBR_CLASS_NAME">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">DBR_CLASS_NAME</span></span><a class="headerlink" href="#cothread.catools.DBR_CLASS_NAME" title="Link to this definition">#</a></dt>
<dd><p>Returns the name of the “enclosing interface”, typically the
record type, and typically the same as the EPICS <code class="docutils literal notranslate"><span class="pre">.RTYP</span></code> field.</p>
</dd></dl>

<p>For <a class="reference internal" href="#cothread.catools.caput" title="cothread.catools.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a> also two further values are supported:</p>
<dl class="py data">
<dt class="sig sig-object py" id="cothread.catools.DBR_PUT_ACKT">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">DBR_PUT_ACKT</span></span><a class="headerlink" href="#cothread.catools.DBR_PUT_ACKT" title="Link to this definition">#</a></dt>
<dt class="sig sig-object py" id="cothread.catools.DBR_PUT_ACKS">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">DBR_PUT_ACKS</span></span><a class="headerlink" href="#cothread.catools.DBR_PUT_ACKS" title="Link to this definition">#</a></dt>
<dd><p>These are used for global alarm acknowledgement, where
<code class="docutils literal notranslate"><span class="pre">_ACKT</span></code> configures whether alarms need to be acknowleged
and <code class="docutils literal notranslate"><span class="pre">_ACKS</span></code> acknowledges alarms of a particular severity.</p>
</dd></dl>

</li>
</ol>
</dd>
</dl>
<dl id="augmented-format">
<dt><a class="reference external" href="https://docs.python.org/3/library/functions.html#format" title="(in Python v3.11)"><code class="xref any docutils literal notranslate"><span class="pre">format</span></code></a></dt><dd><p>This controls how much auxilliary information will be returned with
the retrieved data, and can be one of the following:</p>
<dl class="py data">
<dt class="sig sig-object py" id="cothread.catools.FORMAT_RAW">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">FORMAT_RAW</span></span><a class="headerlink" href="#cothread.catools.FORMAT_RAW" title="Link to this definition">#</a></dt>
<dd><p>The data is returned unaugmented except for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">.name</span></code> and
<code class="xref py py-attr docutils literal notranslate"><span class="pre">.ok</span></code> fields.  This is the default value.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="cothread.catools.FORMAT_TIME">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">FORMAT_TIME</span></span><a class="headerlink" href="#cothread.catools.FORMAT_TIME" title="Link to this definition">#</a></dt>
<dd><p>The data is augmented by timestamp fields <a class="reference internal" href="#cothread.catools..timestamp" title="cothread.catools..timestamp"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timestamp</span></code></a>
and <a class="reference internal" href="#cothread.catools..raw_stamp" title="cothread.catools..raw_stamp"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw_stamp</span></code></a> together with alarm
<a class="reference internal" href="#cothread.catools..status" title="cothread.catools..status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a> and <a class="reference internal" href="#cothread.catools..severity" title="cothread.catools..severity"><code class="xref py py-attr docutils literal notranslate"><span class="pre">severity</span></code></a>
fields.  The value in <a class="reference internal" href="#cothread.catools..timestamp" title="cothread.catools..timestamp"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timestamp</span></code></a> is in
<a class="reference external" href="https://docs.python.org/3/library/time.html#time.time" title="(in Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.time()</span></code></a> format (seconds in Unix UTC epoch) rounded to the
nearest microsecond.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="cothread.catools.FORMAT_CTRL">
<span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">FORMAT_CTRL</span></span><a class="headerlink" href="#cothread.catools.FORMAT_CTRL" title="Link to this definition">#</a></dt>
<dd><p>The data is augmented by channel access “control” fields.  The set of
fields returned depends on the underlying datatype as follows:</p>
<dl class="simple">
<dt><a class="reference internal" href="#cothread.catools.DBR_SHORT" title="cothread.catools.DBR_SHORT"><code class="xref py py-const docutils literal notranslate"><span class="pre">DBR_SHORT</span></code></a>, <a class="reference internal" href="#cothread.catools.DBR_CHAR" title="cothread.catools.DBR_CHAR"><code class="xref py py-const docutils literal notranslate"><span class="pre">DBR_CHAR</span></code></a>, <a class="reference internal" href="#cothread.catools.DBR_LONG" title="cothread.catools.DBR_LONG"><code class="xref py py-const docutils literal notranslate"><span class="pre">DBR_LONG</span></code></a></dt><dd><p>The alarm <a class="reference internal" href="#cothread.catools..status" title="cothread.catools..status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a> and
<a class="reference internal" href="#cothread.catools..severity" title="cothread.catools..severity"><code class="xref py py-attr docutils literal notranslate"><span class="pre">severity</span></code></a> fields together with
<a class="reference internal" href="#cothread.catools..units" title="cothread.catools..units"><code class="xref py py-attr docutils literal notranslate"><span class="pre">units</span></code></a> and limit fields: <a class="reference internal" href="#cothread.catools..upper_disp_limit" title="cothread.catools..upper_disp_limit"><code class="xref py py-attr docutils literal notranslate"><span class="pre">upper_disp_limit</span></code></a>,
<a class="reference internal" href="#cothread.catools..lower_disp_limit" title="cothread.catools..lower_disp_limit"><code class="xref py py-attr docutils literal notranslate"><span class="pre">lower_disp_limit</span></code></a>, <a class="reference internal" href="#cothread.catools..upper_alarm_limit" title="cothread.catools..upper_alarm_limit"><code class="xref py py-attr docutils literal notranslate"><span class="pre">upper_alarm_limit</span></code></a>,
<a class="reference internal" href="#cothread.catools..lower_alarm_limit" title="cothread.catools..lower_alarm_limit"><code class="xref py py-attr docutils literal notranslate"><span class="pre">lower_alarm_limit</span></code></a>, <a class="reference internal" href="#cothread.catools..upper_warning_limit" title="cothread.catools..upper_warning_limit"><code class="xref py py-attr docutils literal notranslate"><span class="pre">upper_warning_limit</span></code></a>,
<a class="reference internal" href="#cothread.catools..lower_warning_limit" title="cothread.catools..lower_warning_limit"><code class="xref py py-attr docutils literal notranslate"><span class="pre">lower_warning_limit</span></code></a>, <a class="reference internal" href="#cothread.catools..upper_ctrl_limit" title="cothread.catools..upper_ctrl_limit"><code class="xref py py-attr docutils literal notranslate"><span class="pre">upper_ctrl_limit</span></code></a>,
<a class="reference internal" href="#cothread.catools..lower_ctrl_limit" title="cothread.catools..lower_ctrl_limit"><code class="xref py py-attr docutils literal notranslate"><span class="pre">lower_ctrl_limit</span></code></a>.  The meaning of these fields is
determined by EPICS channel access.</p>
</dd>
<dt><a class="reference internal" href="#cothread.catools.DBR_FLOAT" title="cothread.catools.DBR_FLOAT"><code class="xref py py-const docutils literal notranslate"><span class="pre">DBR_FLOAT</span></code></a>, <a class="reference internal" href="#cothread.catools.DBR_DOUBLE" title="cothread.catools.DBR_DOUBLE"><code class="xref py py-const docutils literal notranslate"><span class="pre">DBR_DOUBLE</span></code></a></dt><dd><p>As above together with a <a class="reference internal" href="#cothread.catools..precision" title="cothread.catools..precision"><code class="xref py py-attr docutils literal notranslate"><span class="pre">precision</span></code></a> field.</p>
</dd>
<dt><a class="reference internal" href="#cothread.catools.DBR_ENUM" title="cothread.catools.DBR_ENUM"><code class="xref py py-const docutils literal notranslate"><span class="pre">DBR_ENUM</span></code></a></dt><dd><p>Alarm <a class="reference internal" href="#cothread.catools..status" title="cothread.catools..status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a> and
<a class="reference internal" href="#cothread.catools..severity" title="cothread.catools..severity"><code class="xref py py-attr docutils literal notranslate"><span class="pre">severity</span></code></a> fields together with
<a class="reference internal" href="#cothread.catools..enums" title="cothread.catools..enums"><code class="xref py py-attr docutils literal notranslate"><span class="pre">enums</span></code></a>, a list of possible enumeration strings.  The
underlying value for an enumeration will be an index into
<a class="reference internal" href="#cothread.catools..enums" title="cothread.catools..enums"><code class="xref py py-attr docutils literal notranslate"><span class="pre">enums</span></code></a>.</p>
</dd>
<dt><a class="reference internal" href="#cothread.catools.DBR_STRING" title="cothread.catools.DBR_STRING"><code class="xref py py-const docutils literal notranslate"><span class="pre">DBR_STRING</span></code></a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">_CTRL</span></code> format is not supported for this field type, and
<a class="reference internal" href="#cothread.catools.FORMAT_TIME" title="cothread.catools.FORMAT_TIME"><code class="xref py py-const docutils literal notranslate"><span class="pre">FORMAT_TIME</span></code></a> data is returned instead.</p>
</dd>
</dl>
</dd></dl>

</dd>
</dl>
<dl id="augmented-count">
<dt><a class="reference internal" href="#cothread.catools.ca_info..count" title="cothread.catools.ca_info..count"><code class="xref any py py-attr docutils literal notranslate"><span class="pre">count</span></code></a></dt><dd><p>The precise behaviour of this parameter is EPICS server and client version
specific, but for recent versions of EPICS there are three options:</p>
<dl>
<dt>0 (default)</dt><dd><p>For recent versions of EPICS this is interpreted as a request for the
true data dependent length of the data, for example, the number of
points in a waveform record determined by the <code class="docutils literal notranslate"><span class="pre">.NORD</span></code> field).  For
older versions of EPICS the full waveform is returned.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This feature means that a very visible change in behaviour is seen
when upgrading from EPICS 3.14.11 to 3.14.12.  Before this update
requests from waveform records ignore <code class="docutils literal notranslate"><span class="pre">.NORD</span></code>, subsequently it is
possible for truncated data to be returned in response to a default
request.</p>
</div>
</dd>
<dt>-1 (or any negative value)</dt><dd><p>This will always request the entire waveform, up to
<a class="reference internal" href="#cothread.catools..element_count" title="cothread.catools..element_count"><code class="xref py py-attr docutils literal notranslate"><span class="pre">element_count</span></code></a> values.</p>
</dd>
<dt>any other value</dt><dd><p>Returns the specified number of elements, up to <a class="reference internal" href="#cothread.catools..element_count" title="cothread.catools..element_count"><code class="xref py py-attr docutils literal notranslate"><span class="pre">element_count</span></code></a>.</p>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="fields-in-augmented-values">
<h3>Fields in Augmented Values<a class="headerlink" href="#fields-in-augmented-values" title="Link to this heading">#</a></h3>
<p>Summary of all available fields in augmented values.</p>
<p>The following fields are present in all augmented values.</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">name</span></span></dt>
<dd><p>Name of record, always present.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">ok</span></span></dt>
<dd><p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, always present.</p>
</dd></dl>

<p>The following fields are present if <code class="xref py py-attr docutils literal notranslate"><span class="pre">.ok</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>:</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">datatype</span></span></dt>
<dd><p>This is the underlying EPICS data type of the value, and is one of the
following values:</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p>DBR_STRING</p></td>
<td><p>0</p></td>
<td><p>String (up to 40 characters)</p></td>
</tr>
<tr class="row-even"><td><p>DBR_SHORT</p></td>
<td><p>1</p></td>
<td><p>16-bit signed integer</p></td>
</tr>
<tr class="row-odd"><td><p>DBR_FLOAT</p></td>
<td><p>2</p></td>
<td><p>32-bit floating point number</p></td>
</tr>
<tr class="row-even"><td><p>DBR_ENUM</p></td>
<td><p>3</p></td>
<td><p>Enumeration, should be value between 0 and 15, but the
underlying data is a 16-bit integer</p></td>
</tr>
<tr class="row-odd"><td><p>DBR_CHAR</p></td>
<td><p>4</p></td>
<td><p>8-bit signed integer</p></td>
</tr>
<tr class="row-even"><td><p>DBR_LONG</p></td>
<td><p>5</p></td>
<td><p>32-bit signed integer</p></td>
</tr>
<tr class="row-odd"><td><p>DBR_DOUBLE</p></td>
<td><p>6</p></td>
<td><p>64-bit floating point number</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">element_count</span></span></dt>
<dd><p>Number of elements in the underlying EPICS value.  If this is not 1 then the
value is treated as an array, otherwise up to this many elements may be
present in the value.</p>
</dd></dl>

<p>The following fields are present in all values if <a class="reference internal" href="#cothread.catools.FORMAT_TIME" title="cothread.catools.FORMAT_TIME"><code class="xref py py-const docutils literal notranslate"><span class="pre">FORMAT_TIME</span></code></a> is
specified.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools..raw_stamp">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">raw_stamp</span></span><a class="headerlink" href="#cothread.catools..raw_stamp" title="Link to this definition">#</a></dt>
<dd><p>Record timestamp in raw format as provided by EPICS (but in the local Unix
epoch, not the EPICS epoch).  Is a tuple of the form <code class="docutils literal notranslate"><span class="pre">(secs,</span> <span class="pre">nsec)</span></code> with
integer seconds and nanosecond values, provided in case full ns timestamp
precision is required.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools..timestamp">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">timestamp</span></span><a class="headerlink" href="#cothread.catools..timestamp" title="Link to this definition">#</a></dt>
<dd><p>Timestamp in seconds in format compatible with <code class="docutils literal notranslate"><span class="pre">time.time()</span></code> rounded to
the nearest microsecond: for nanosecond precision use <a class="reference internal" href="#cothread.catools..raw_stamp" title="cothread.catools..raw_stamp"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw_stamp</span></code></a>
instead.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools..datetime">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">datetime</span></span><a class="headerlink" href="#cothread.catools..datetime" title="Link to this definition">#</a></dt>
<dd><p>This is a dynamic property which returns <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> as a
<a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code></a> value by computing</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>
</pre></div>
</div>
<p>from the <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> attribute.  This calculation takes local time
into account.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an incompatible change from cothread version 2.3 and earlier.
In earlier versions this field did not exist but could be assigned to,
in this release <code class="docutils literal notranslate"><span class="pre">datetime</span></code> is a read-only property which cannot
be assigned to.</p>
</div>
</dd></dl>

<p>The following fields are present in all values if <a class="reference internal" href="#cothread.catools.FORMAT_TIME" title="cothread.catools.FORMAT_TIME"><code class="xref py py-const docutils literal notranslate"><span class="pre">FORMAT_TIME</span></code></a> or
<a class="reference internal" href="#cothread.catools.FORMAT_CTRL" title="cothread.catools.FORMAT_CTRL"><code class="xref py py-const docutils literal notranslate"><span class="pre">FORMAT_CTRL</span></code></a> is specified.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools..severity">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">severity</span></span><a class="headerlink" href="#cothread.catools..severity" title="Link to this definition">#</a></dt>
<dd><p>EPICS alarm severity, normally one of the values listed below.</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>No alarm</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Alarm condition, minor severity</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Alarm condition, major severity.</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Invalid value.</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools..status">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">status</span></span><a class="headerlink" href="#cothread.catools..status" title="Link to this definition">#</a></dt>
<dd><p>Reason code associated with alarm severity, always present with
<a class="reference internal" href="#cothread.catools..severity" title="cothread.catools..severity"><code class="xref py py-attr docutils literal notranslate"><span class="pre">severity</span></code></a> code.</p>
</dd></dl>

<p>The following fields are returned if <code class="docutils literal notranslate"><span class="pre">DBR_STSACK_STRING</span></code> is specified:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools..ackt">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">ackt</span></span><a class="headerlink" href="#cothread.catools..ackt" title="Link to this definition">#</a></dt>
<dd><p>Whether it is necessary to acknowledge transient alarms</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools..acks">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">acks</span></span><a class="headerlink" href="#cothread.catools..acks" title="Link to this definition">#</a></dt>
<dd><p>The highest severity unacknowledged alarm</p>
</dd></dl>

<p>The following fields are present in numeric values if <a class="reference internal" href="#cothread.catools.FORMAT_CTRL" title="cothread.catools.FORMAT_CTRL"><code class="xref py py-const docutils literal notranslate"><span class="pre">FORMAT_CTRL</span></code></a> is
specified.  Values of type <a class="reference internal" href="#cothread.catools.DBR_ENUM" title="cothread.catools.DBR_ENUM"><code class="xref py py-const docutils literal notranslate"><span class="pre">DBR_ENUM</span></code></a> or <a class="reference internal" href="#cothread.catools.DBR_STRING" title="cothread.catools.DBR_STRING"><code class="xref py py-const docutils literal notranslate"><span class="pre">DBR_STRING</span></code></a> are not
numeric.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools..units">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">units</span></span><a class="headerlink" href="#cothread.catools..units" title="Link to this definition">#</a></dt>
<dd><p>Units for display.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools..upper_disp_limit">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">upper_disp_limit</span></span><a class="headerlink" href="#cothread.catools..upper_disp_limit" title="Link to this definition">#</a></dt>
<dt class="sig sig-object py" id="cothread.catools..lower_disp_limit">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">lower_disp_limit</span></span><a class="headerlink" href="#cothread.catools..lower_disp_limit" title="Link to this definition">#</a></dt>
<dd><p>Suggested display limits for numerical values.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools..upper_alarm_limit">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">upper_alarm_limit</span></span><a class="headerlink" href="#cothread.catools..upper_alarm_limit" title="Link to this definition">#</a></dt>
<dt class="sig sig-object py" id="cothread.catools..lower_alarm_limit">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">lower_alarm_limit</span></span><a class="headerlink" href="#cothread.catools..lower_alarm_limit" title="Link to this definition">#</a></dt>
<dt class="sig sig-object py" id="cothread.catools..upper_warning_limit">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">upper_warning_limit</span></span><a class="headerlink" href="#cothread.catools..upper_warning_limit" title="Link to this definition">#</a></dt>
<dt class="sig sig-object py" id="cothread.catools..lower_warning_limit">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">lower_warning_limit</span></span><a class="headerlink" href="#cothread.catools..lower_warning_limit" title="Link to this definition">#</a></dt>
<dt class="sig sig-object py" id="cothread.catools..upper_ctrl_limit">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">upper_ctrl_limit</span></span><a class="headerlink" href="#cothread.catools..upper_ctrl_limit" title="Link to this definition">#</a></dt>
<dt class="sig sig-object py" id="cothread.catools..lower_ctrl_limit">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">lower_ctrl_limit</span></span><a class="headerlink" href="#cothread.catools..lower_ctrl_limit" title="Link to this definition">#</a></dt>
<dd><p>Various EPICS numeric limits.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools..precision">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">precision</span></span><a class="headerlink" href="#cothread.catools..precision" title="Link to this definition">#</a></dt>
<dd><p>For floating point values only, the specified display precision
(or 0 if not specified).  Present if value is a floating point type.</p>
</dd></dl>

<p>The following field is only present in <a class="reference internal" href="#cothread.catools.DBR_ENUM" title="cothread.catools.DBR_ENUM"><code class="xref py py-const docutils literal notranslate"><span class="pre">DBR_ENUM</span></code></a> values.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools..enums">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">enums</span></span><a class="headerlink" href="#cothread.catools..enums" title="Link to this definition">#</a></dt>
<dd><p>For enumeration values only, an array of enumeration strings
indexable by enumeration value.</p>
</dd></dl>

</section>
<section id="error-code-values">
<span id="ca-nothing"></span><h3>Error Code Values<a class="headerlink" href="#error-code-values" title="Link to this heading">#</a></h3>
<p>Error code values are used to indicate a success return from <a class="reference internal" href="#cothread.catools.caput" title="cothread.catools.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a> (in
which case <code class="xref py py-attr docutils literal notranslate"><span class="pre">.ok</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>), to indicated disconnection using
<a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a>, and to indicate any other failure, either as a return value
or raised as an exception.</p>
<dl class="py class">
<dt class="sig sig-object py" id="cothread.catools.ca_nothing">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cothread.catools.</span></span><span class="sig-name descname"><span class="pre">ca_nothing</span></span><a class="headerlink" href="#cothread.catools.ca_nothing" title="Link to this definition">#</a></dt>
<dd><p>All error code values have type <a class="reference internal" href="#cothread.catools.ca_nothing" title="cothread.catools.ca_nothing"><code class="xref py py-class docutils literal notranslate"><span class="pre">ca_nothing</span></code></a> and provide the
following fields:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools.ca_nothing..ok">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">ok</span></span><a class="headerlink" href="#cothread.catools.ca_nothing..ok" title="Link to this definition">#</a></dt>
<dd><p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> if the data is good, <code class="docutils literal notranslate"><span class="pre">False</span></code> if there was an
error.  Testing an error code value for boolean will return the value of
<code class="xref py py-attr docutils literal notranslate"><span class="pre">.ok</span></code>, so for example it is possible to write:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">caput</span><span class="p">(</span><span class="n">pv</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">throw</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">process</span> <span class="n">caput</span> <span class="n">error</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools.ca_nothing..name">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#cothread.catools.ca_nothing..name" title="Link to this definition">#</a></dt>
<dd><p>Name of the PV which generated this error..</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.catools.ca_nothing..errorcode">
<span class="sig-prename descclassname"><span class="pre">.</span></span><span class="sig-name descname"><span class="pre">errorcode</span></span><a class="headerlink" href="#cothread.catools.ca_nothing..errorcode" title="Link to this definition">#</a></dt>
<dd><p>Channel access error code.  The following values are worth noting:</p>
<dl class="py data">
<dt class="sig sig-object py" id="cothread.catools.ca_nothing.ECA_SUCCESS">
<span class="sig-name descname"><span class="pre">ECA_SUCCESS</span></span><a class="headerlink" href="#cothread.catools.ca_nothing.ECA_SUCCESS" title="Link to this definition">#</a></dt>
<dd><p>Success error code.  In this case <code class="xref py py-attr docutils literal notranslate"><span class="pre">.ok</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.
Returned by successful <a class="reference internal" href="#cothread.catools.caput" title="cothread.catools.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a> and <a class="reference internal" href="#cothread.catools.connect" title="cothread.catools.connect"><code class="xref py py-func docutils literal notranslate"><span class="pre">connect()</span></code></a> calls.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="cothread.catools.ca_nothing.ECA_DISCONN">
<span class="sig-name descname"><span class="pre">ECA_DISCONN</span></span><a class="headerlink" href="#cothread.catools.ca_nothing.ECA_DISCONN" title="Link to this definition">#</a></dt>
<dd><p>Channel disconnected.  This is used by <a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a> to report
channel disconnect events.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="cothread.catools.ca_nothing.ECA_TIMEOUT">
<span class="sig-name descname"><span class="pre">ECA_TIMEOUT</span></span><a class="headerlink" href="#cothread.catools.ca_nothing.ECA_TIMEOUT" title="Link to this definition">#</a></dt>
<dd><p>Channel timed out.  Reported if user specified timeout ocurred
before completion and if <code class="docutils literal notranslate"><span class="pre">throw=False</span></code> specified.</p>
</dd></dl>

</dd></dl>

</dd></dl>

</section>
</section>
<section id="module-cothread.pv">
<span id="pv-and-pv-array-classes"></span><h2>PV and PV_array Classes<a class="headerlink" href="#module-cothread.pv" title="Link to this heading">#</a></h2>
<p>Two classes are provided for wrapping <a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a>.  The <a class="reference internal" href="#cothread.pv.PV" title="cothread.pv.PV"><code class="xref py py-class docutils literal notranslate"><span class="pre">PV</span></code></a> class
wraps access to a single PV and always contains the latest value.  On the other
hand, <a class="reference internal" href="#cothread.pv.PV_array" title="cothread.pv.PV_array"><code class="xref py py-class docutils literal notranslate"><span class="pre">PV_array</span></code></a> gathers a uniform array of PVs into a single array.
These two classes can be imported from <a class="reference internal" href="#module-cothread.pv" title="cothread.pv"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cothread.pv</span></code></a>.</p>
<p>Note that both classes will automatically unsubscribe from their PVs when
deleted.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that both of these classes are still somewhat experimental and may
change in future releases.</p>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="cothread.pv.PV">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cothread.pv.</span></span><span class="sig-name descname"><span class="pre">PV</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pv</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on_update=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_value=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">caput_wait=False</span></span></em>, <span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">initial_timeout</span></span></em>, <span class="optional">]</span><em class="sig-param"><span class="n"><span class="pre">**kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cothread.pv.PV" title="Link to this definition">#</a></dt>
<dd><p>Creates a wrapper to monitor <em>pv</em>.  If an <em>on_update</em> function is passed it
will be called with the class instance as argument after each update to the
instance.  The <em>kargs</em> are passed through to the called
<a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a>. The flag <em>caput_wait</em> can be set to
change the default behaviour of <a class="reference internal" href="#cothread.pv.PV.caput" title="cothread.pv.PV.caput"><code class="xref py py-meth docutils literal notranslate"><span class="pre">caput()</span></code></a>.</p>
<p>The behaviour of the first call to <a class="reference internal" href="#cothread.pv.PV.get" title="cothread.pv.PV.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a> is affected by two arguments,
<em>initial_value</em> and <em>initial_timeout</em>, at most one of which can be
specified.  If <em>initial_timeout</em> is specified then the first call to
<a class="reference internal" href="#cothread.pv.PV.get" title="cothread.pv.PV.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a> will block until this timeout expires or a valid PV value is
available.  Otherwise <em>initial_value</em> can be set to specify a value to
return until the PV has updated.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an incompatible change from cothread versions 2.11 and 2.12.  In
these versions the <em>initial_timeout</em> argument is named <em>timeout</em>,
defaults to 5, and cannot be unset.</p>
</div>
<p>Note that blocking on a PV object for the initial update cannot be safely
done from within a camonitor callback, as in this case the blocking
operation is waiting for a camonitor callback to occur, and only one
camonitor callback is processed at a time.</p>
<dl class="py method">
<dt class="sig sig-object py" id="cothread.pv.PV.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cothread.pv.PV.close" title="Link to this definition">#</a></dt>
<dd><p>Closes the associated <a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a>.  No further
updates will occur. Note that it is sufficient to drop all references
to the class, it will then automatically call <a class="reference internal" href="#cothread.pv.PV.close" title="cothread.pv.PV.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cothread.pv.PV.sync">
<span class="sig-name descname"><span class="pre">sync</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#cothread.pv.PV.sync" title="Link to this definition">#</a></dt>
<dd><p>This call will block until the <a class="reference internal" href="#cothread.pv.PV" title="cothread.pv.PV"><code class="xref py py-class docutils literal notranslate"><span class="pre">PV</span></code></a> object has seen at least one
update.  If <em>initial_timeout</em> was specified in the constructor then its
associated deadline can be used as a default timeout, otherwise a
<em>timeout</em> must be specified.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cothread.pv.PV.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cothread.pv.PV.get" title="Link to this definition">#</a></dt>
<dd><p>Returns the current value associated with the PV.  This will be the most
recently delivered PV value as notified through a
<a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a> callback.</p>
<p>On the first call to <a class="reference internal" href="#cothread.pv.PV.get" title="cothread.pv.PV.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a> if no value has yet been delivered (no
callback has yet occurred) this call will block until the timeout passed
to the constructor has expired or a value has arrived, and if the
timeout expires then an exception is raised.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cothread.pv.PV.get_next">
<span class="sig-name descname"><span class="pre">get_next</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cothread.pv.PV.get_next" title="Link to this definition">#</a></dt>
<dd><p>Returns a fresh value associated with the PV, blocks and waits if
necessary.  Values are consumed by calling this method or <a class="reference internal" href="#cothread.pv.PV.reset" title="cothread.pv.PV.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reset()</span></code></a>,
values are generated by <a class="reference internal" href="#cothread.catools.camonitor" title="cothread.catools.camonitor"><code class="xref py py-func docutils literal notranslate"><span class="pre">camonitor()</span></code></a> callbacks,
so to ensure the value is fresher than the point of call <em>reset</em> can be
set to discard any pending value.  A <em>timeout</em> can be specified to
limit how long to wait for a new value, and a timeout exception may be raised.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cothread.pv.PV.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cothread.pv.PV.reset" title="Link to this definition">#</a></dt>
<dd><p>Discards any pending value for <a class="reference internal" href="#cothread.pv.PV.get_next" title="cothread.pv.PV.get_next"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_next()</span></code></a>, ensures
<a class="reference internal" href="#cothread.pv.PV.get_next" title="cothread.pv.PV.get_next"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_next()</span></code></a> will block until a fresh value arrives.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cothread.pv.PV.caget">
<span class="sig-name descname"><span class="pre">caget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cothread.pv.PV.caget" title="Link to this definition">#</a></dt>
<dd><p>Directly calls <a class="reference internal" href="#cothread.pv.PV.caget" title="cothread.pv.PV.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">caget()</span></code></a> on the underlying PV with the given
arguments.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cothread.pv.PV.caput">
<span class="sig-name descname"><span class="pre">caput</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cothread.pv.PV.caput" title="Link to this definition">#</a></dt>
<dd><p>Directly calls <a class="reference internal" href="#cothread.pv.PV.caput" title="cothread.pv.PV.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a> on the underlying PV with the given
arguments.  If <em>caput_wait</em> was set in the original <a class="reference internal" href="#cothread.pv.PV" title="cothread.pv.PV"><code class="xref py py-class docutils literal notranslate"><span class="pre">PV</span></code></a>
constructor then by default <a class="reference internal" href="#cothread.pv.PV.caput" title="cothread.pv.PV.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a> is called with <code class="docutils literal notranslate"><span class="pre">wait=True</span></code>,
otherwise <a class="reference internal" href="#cothread.pv.PV.caput" title="cothread.pv.PV.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a> is non blocking.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.pv.PV.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#cothread.pv.PV.name" title="Link to this definition">#</a></dt>
<dd><p>This is the PV name, and should be the same as <code class="docutils literal notranslate"><span class="pre">.value.name</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.pv.PV.value">
<span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#cothread.pv.PV.value" title="Link to this definition">#</a></dt>
<dd><p>This attribute is a property wrapping <a class="reference internal" href="#cothread.pv.PV.get" title="cothread.pv.PV.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a> and <a class="reference internal" href="#cothread.pv.PV.caput" title="cothread.pv.PV.caput"><code class="xref py py-meth docutils literal notranslate"><span class="pre">caput()</span></code></a>, so
given <code class="docutils literal notranslate"><span class="pre">pv</span> <span class="pre">=</span> <span class="pre">PV(pvname)</span></code> then <code class="docutils literal notranslate"><span class="pre">pv.value</span></code> returns the most recent
value for <code class="code docutils literal notranslate"><span class="pre">pv</span></code> and <code class="docutils literal notranslate"><span class="pre">pv.value</span> <span class="pre">=</span> <span class="pre">new_value</span></code> will call <code class="docutils literal notranslate"><span class="pre">caput(pvname,</span>
<span class="pre">new_value)</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="cothread.pv.PV_array">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cothread.pv.</span></span><span class="sig-name descname"><span class="pre">PV_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">caput_wait</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cothread.pv.PV_array" title="Link to this definition">#</a></dt>
<dd><p>Uses <em>pvs</em> to create an aggregate array containing the value of all
specified PVs aggregated into a single <a class="reference external" href="https://numpy.org/doc/stable/reference/index.html#module-numpy" title="(in NumPy v1.26)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code></a> array.  The type of all
the elements is specified by <em>dtype</em> and the number of points contributed by
each PV is given by <em>count</em>.  If <em>count</em> is 1 the generated array is one
dimensional of shape <code class="docutils literal notranslate"><span class="pre">(len(pvs),)</span></code>, otherwise the shape is
<code class="docutils literal notranslate"><span class="pre">(len(pvs),count)</span></code>.  The flag <em>caput_wait</em> can be set to change the
default behaviour of <a class="reference internal" href="#cothread.pv.PV_array.caput" title="cothread.pv.PV_array.caput"><code class="xref py py-meth docutils literal notranslate"><span class="pre">caput()</span></code></a>.</p>
<p>At the same time arrays of length <code class="docutils literal notranslate"><span class="pre">len(pvs)</span></code> are created for the
connection status, timestamp and severity of each PV.</p>
<p>If specified the <em>on_update</em> method will be called for each update to each
field of the managed array.  The arguments passed are the updated
<a class="reference internal" href="#cothread.pv.PV_array" title="cothread.pv.PV_array"><code class="xref py py-class docutils literal notranslate"><span class="pre">PV_array</span></code></a> instance and the index of the update.</p>
<dl class="py method">
<dt class="sig sig-object py" id="cothread.pv.PV_array.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cothread.pv.PV_array.close" title="Link to this definition">#</a></dt>
<dd><p>Closes all monitors.  Note that this is called automatically when the
last reference to the created <a class="reference internal" href="#cothread.pv.PV_array" title="cothread.pv.PV_array"><code class="xref py py-class docutils literal notranslate"><span class="pre">PV_array</span></code></a> instance is dropped.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cothread.pv.PV_array.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cothread.pv.PV_array.get" title="Link to this definition">#</a></dt>
<dd><p>Returns copy of current value.  This will be a <a class="reference external" href="https://numpy.org/doc/stable/reference/index.html#module-numpy" title="(in NumPy v1.26)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code></a> array with
shape and dtype determined by the arguments to the constructor.  This is
the same as the value returned by the <a class="reference internal" href="#cothread.pv.PV_array.value" title="cothread.pv.PV_array.value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">value</span></code></a> attribute.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cothread.pv.PV_array.caget">
<span class="sig-name descname"><span class="pre">caget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cothread.pv.PV_array.caget" title="Link to this definition">#</a></dt>
<dd><p>Directly calls <a class="reference internal" href="#cothread.pv.PV_array.caget" title="cothread.pv.PV_array.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">caget()</span></code></a> on the list of PVs and returns an array of
results; this should be the same shape and parameters as returned by
<a class="reference internal" href="#cothread.pv.PV_array.get" title="cothread.pv.PV_array.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cothread.pv.PV_array.caput">
<span class="sig-name descname"><span class="pre">caput</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cothread.pv.PV_array.caput" title="Link to this definition">#</a></dt>
<dd><p>Directly calls <a class="reference internal" href="#cothread.pv.PV_array.caput" title="cothread.pv.PV_array.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a> on the stored list of PVs.  If <em>caput_wait</em>
was set in the original <a class="reference internal" href="#cothread.pv.PV" title="cothread.pv.PV"><code class="xref py py-class docutils literal notranslate"><span class="pre">PV</span></code></a> constructor then by default
<a class="reference internal" href="#cothread.pv.PV_array.caput" title="cothread.pv.PV_array.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a> is called with <code class="docutils literal notranslate"><span class="pre">wait=True</span></code>, otherwise <a class="reference internal" href="#cothread.pv.PV_array.caput" title="cothread.pv.PV_array.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">caput()</span></code></a> is
non blocking.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cothread.pv.PV_array.sync">
<span class="sig-name descname"><span class="pre">sync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">throw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cothread.pv.PV_array.sync" title="Link to this definition">#</a></dt>
<dd><p>This method attempts to ensure that all of the PVs associated with this
array have received at least one update by blocking.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.pv.PV_array.value">
<span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#cothread.pv.PV_array.value" title="Link to this definition">#</a></dt>
<dd><p>Returns copy of current value, same as <a class="reference internal" href="#cothread.pv.PV_array.get" title="cothread.pv.PV_array.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a> when read, calls
<a class="reference internal" href="#cothread.pv.PV_array.caput" title="cothread.pv.PV_array.caput"><code class="xref py py-meth docutils literal notranslate"><span class="pre">caput()</span></code></a> when written to.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.pv.PV_array.names">
<span class="sig-name descname"><span class="pre">names</span></span><a class="headerlink" href="#cothread.pv.PV_array.names" title="Link to this definition">#</a></dt>
<dd><p>Stores the names of the monitored PVs.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.pv.PV_array.timestamp">
<span class="sig-name descname"><span class="pre">timestamp</span></span><a class="headerlink" href="#cothread.pv.PV_array.timestamp" title="Link to this definition">#</a></dt>
<dd><p>Timestamp of the most recent update for each monitored PV in standard
<a class="reference external" href="https://docs.python.org/3/library/time.html#time.time" title="(in Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.time()</span></code></a> format.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.pv.PV_array.severity">
<span class="sig-name descname"><span class="pre">severity</span></span><a class="headerlink" href="#cothread.pv.PV_array.severity" title="Link to this definition">#</a></dt>
<dd><p>Array of EPICS severity codes for the most recent update for each PV.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.pv.PV_array.status">
<span class="sig-name descname"><span class="pre">status</span></span><a class="headerlink" href="#cothread.pv.PV_array.status" title="Link to this definition">#</a></dt>
<dd><p>Array of EPICS status codes for the most recent update for each PV.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.pv.PV_array.ok">
<span class="sig-name descname"><span class="pre">ok</span></span><a class="headerlink" href="#cothread.pv.PV_array.ok" title="Link to this definition">#</a></dt>
<dd><p>Connection status for each monitored PV.  If any element of <code class="xref py py-attr docutils literal notranslate"><span class="pre">.ok</span></code>
is <code class="docutils literal notranslate"><span class="pre">False</span></code> then the PV is disconnected and the corresponding
<code class="xref py py-attr docutils literal notranslate"><span class="pre">.value</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">.timestamp</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">.severity</span></code> and
<code class="xref py py-attr docutils literal notranslate"><span class="pre">.status</span></code> elements contain old and stale values.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cothread.pv.PV_array.all_ok">
<span class="sig-name descname"><span class="pre">all_ok</span></span><a class="headerlink" href="#cothread.pv.PV_array.all_ok" title="Link to this definition">#</a></dt>
<dd><p>Returns aggregate status of <code class="xref py py-attr docutils literal notranslate"><span class="pre">.ok</span></code>, <code class="docutils literal notranslate"><span class="pre">True</span></code> iff all PVs
currently connected.</p>
</dd></dl>

<p>Note that the attributes <a class="reference internal" href="#cothread.pv.PV_array.value" title="cothread.pv.PV_array.value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">value</span></code></a>, <a class="reference internal" href="#cothread.pv.PV_array.ok" title="cothread.pv.PV_array.ok"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ok</span></code></a>, <a class="reference internal" href="#cothread.pv.PV_array.timestamp" title="cothread.pv.PV_array.timestamp"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timestamp</span></code></a>,
<a class="reference internal" href="#cothread.pv.PV_array.severity" title="cothread.pv.PV_array.severity"><code class="xref py py-attr docutils literal notranslate"><span class="pre">severity</span></code></a>, and <a class="reference internal" href="#cothread.pv.PV_array.status" title="cothread.pv.PV_array.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a> all return fresh copies of the
underlying data.  This means that the values returned are not affected by
subsequent updates to the <a class="reference internal" href="#cothread.pv.PV_array" title="cothread.pv.PV_array"><code class="xref py py-class docutils literal notranslate"><span class="pre">PV_array</span></code></a> object.</p>
</dd></dl>

</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="cothread.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Using the cothread Library</p>
      </div>
    </a>
    <a class="right-next"
       href="training/cothread.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Training: Channel Access with <code class="docutils literal notranslate"><span class="pre">cothread</span></code></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#environment-variables">Environment Variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#function-reference">Function Reference</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#common-notes">Common Notes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#functions">Functions</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.caput"><code class="docutils literal notranslate"><span class="pre">caput()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.caget"><code class="docutils literal notranslate"><span class="pre">caget()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.camonitor"><code class="docutils literal notranslate"><span class="pre">camonitor()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.connect"><code class="docutils literal notranslate"><span class="pre">connect()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_info"><code class="docutils literal notranslate"><span class="pre">ca_info</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_info..ok"><code class="docutils literal notranslate"><span class="pre">ca_info..ok</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_info..name"><code class="docutils literal notranslate"><span class="pre">ca_info..name</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_info..state"><code class="docutils literal notranslate"><span class="pre">ca_info..state</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_info..host"><code class="docutils literal notranslate"><span class="pre">ca_info..host</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_info..read"><code class="docutils literal notranslate"><span class="pre">ca_info..read</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_info..write"><code class="docutils literal notranslate"><span class="pre">ca_info..write</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_info..count"><code class="docutils literal notranslate"><span class="pre">ca_info..count</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_info..datatype"><code class="docutils literal notranslate"><span class="pre">ca_info..datatype</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_info..state_strings"><code class="docutils literal notranslate"><span class="pre">ca_info..state_strings</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_info..datatype_strings"><code class="docutils literal notranslate"><span class="pre">ca_info..datatype_strings</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.cainfo"><code class="docutils literal notranslate"><span class="pre">cainfo()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-values">Working with Values</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..ok"><code class="docutils literal notranslate"><span class="pre">.ok</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..name"><code class="docutils literal notranslate"><span class="pre">.name</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..datatype"><code class="docutils literal notranslate"><span class="pre">.datatype</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..element_count"><code class="docutils literal notranslate"><span class="pre">.element_count</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#values-and-their-types">Values and their Types</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.cothread.dbr.ca_str"><code class="docutils literal notranslate"><span class="pre">cothread.dbr.ca_str</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.cothread.dbr.ca_int"><code class="docutils literal notranslate"><span class="pre">cothread.dbr.ca_int</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.cothread.dbr.ca_float"><code class="docutils literal notranslate"><span class="pre">cothread.dbr.ca_float</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.cothread.dbr.ca_array"><code class="docutils literal notranslate"><span class="pre">cothread.dbr.ca_array</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#augmented-values">Augmented Values</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.DBR_STRING"><code class="docutils literal notranslate"><span class="pre">DBR_STRING</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.DBR_CHAR_STR"><code class="docutils literal notranslate"><span class="pre">DBR_CHAR_STR</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.DBR_CHAR"><code class="docutils literal notranslate"><span class="pre">DBR_CHAR</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.DBR_SHORT"><code class="docutils literal notranslate"><span class="pre">DBR_SHORT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.DBR_LONG"><code class="docutils literal notranslate"><span class="pre">DBR_LONG</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.DBR_FLOAT"><code class="docutils literal notranslate"><span class="pre">DBR_FLOAT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.DBR_DOUBLE"><code class="docutils literal notranslate"><span class="pre">DBR_DOUBLE</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.DBR_ENUM"><code class="docutils literal notranslate"><span class="pre">DBR_ENUM</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.DBR_STSACK_STRING"><code class="docutils literal notranslate"><span class="pre">DBR_STSACK_STRING</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.DBR_CLASS_NAME"><code class="docutils literal notranslate"><span class="pre">DBR_CLASS_NAME</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.DBR_PUT_ACKT"><code class="docutils literal notranslate"><span class="pre">DBR_PUT_ACKT</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.DBR_PUT_ACKS"><code class="docutils literal notranslate"><span class="pre">DBR_PUT_ACKS</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.FORMAT_RAW"><code class="docutils literal notranslate"><span class="pre">FORMAT_RAW</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.FORMAT_TIME"><code class="docutils literal notranslate"><span class="pre">FORMAT_TIME</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.FORMAT_CTRL"><code class="docutils literal notranslate"><span class="pre">FORMAT_CTRL</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fields-in-augmented-values">Fields in Augmented Values</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..raw_stamp"><code class="docutils literal notranslate"><span class="pre">.raw_stamp</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..timestamp"><code class="docutils literal notranslate"><span class="pre">.timestamp</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..datetime"><code class="docutils literal notranslate"><span class="pre">.datetime</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..severity"><code class="docutils literal notranslate"><span class="pre">.severity</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..status"><code class="docutils literal notranslate"><span class="pre">.status</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..ackt"><code class="docutils literal notranslate"><span class="pre">.ackt</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..acks"><code class="docutils literal notranslate"><span class="pre">.acks</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..units"><code class="docutils literal notranslate"><span class="pre">.units</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..upper_disp_limit"><code class="docutils literal notranslate"><span class="pre">.upper_disp_limit</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..lower_disp_limit"><code class="docutils literal notranslate"><span class="pre">.lower_disp_limit</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..upper_alarm_limit"><code class="docutils literal notranslate"><span class="pre">.upper_alarm_limit</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..lower_alarm_limit"><code class="docutils literal notranslate"><span class="pre">.lower_alarm_limit</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..upper_warning_limit"><code class="docutils literal notranslate"><span class="pre">.upper_warning_limit</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..lower_warning_limit"><code class="docutils literal notranslate"><span class="pre">.lower_warning_limit</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..upper_ctrl_limit"><code class="docutils literal notranslate"><span class="pre">.upper_ctrl_limit</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..lower_ctrl_limit"><code class="docutils literal notranslate"><span class="pre">.lower_ctrl_limit</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..precision"><code class="docutils literal notranslate"><span class="pre">.precision</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools..enums"><code class="docutils literal notranslate"><span class="pre">.enums</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#error-code-values">Error Code Values</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_nothing"><code class="docutils literal notranslate"><span class="pre">ca_nothing</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_nothing.ECA_SUCCESS"><code class="docutils literal notranslate"><span class="pre">ca_nothing.ECA_SUCCESS</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_nothing.ECA_DISCONN"><code class="docutils literal notranslate"><span class="pre">ca_nothing.ECA_DISCONN</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_nothing.ECA_TIMEOUT"><code class="docutils literal notranslate"><span class="pre">ca_nothing.ECA_TIMEOUT</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_nothing..ok"><code class="docutils literal notranslate"><span class="pre">ca_nothing..ok</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_nothing..name"><code class="docutils literal notranslate"><span class="pre">ca_nothing..name</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.catools.ca_nothing..errorcode"><code class="docutils literal notranslate"><span class="pre">ca_nothing..errorcode</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-cothread.pv">PV and PV_array Classes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV"><code class="docutils literal notranslate"><span class="pre">PV</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV.close"><code class="docutils literal notranslate"><span class="pre">PV.close()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV.sync"><code class="docutils literal notranslate"><span class="pre">PV.sync()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV.get"><code class="docutils literal notranslate"><span class="pre">PV.get()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV.get_next"><code class="docutils literal notranslate"><span class="pre">PV.get_next()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV.reset"><code class="docutils literal notranslate"><span class="pre">PV.reset()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV.caget"><code class="docutils literal notranslate"><span class="pre">PV.caget()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV.caput"><code class="docutils literal notranslate"><span class="pre">PV.caput()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV.name"><code class="docutils literal notranslate"><span class="pre">PV.name</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV.value"><code class="docutils literal notranslate"><span class="pre">PV.value</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV_array"><code class="docutils literal notranslate"><span class="pre">PV_array</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV_array.close"><code class="docutils literal notranslate"><span class="pre">PV_array.close()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV_array.get"><code class="docutils literal notranslate"><span class="pre">PV_array.get()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV_array.caget"><code class="docutils literal notranslate"><span class="pre">PV_array.caget()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV_array.caput"><code class="docutils literal notranslate"><span class="pre">PV_array.caput()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV_array.sync"><code class="docutils literal notranslate"><span class="pre">PV_array.sync()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV_array.value"><code class="docutils literal notranslate"><span class="pre">PV_array.value</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV_array.names"><code class="docutils literal notranslate"><span class="pre">PV_array.names</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV_array.timestamp"><code class="docutils literal notranslate"><span class="pre">PV_array.timestamp</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV_array.severity"><code class="docutils literal notranslate"><span class="pre">PV_array.severity</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV_array.status"><code class="docutils literal notranslate"><span class="pre">PV_array.status</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV_array.ok"><code class="docutils literal notranslate"><span class="pre">PV_array.ok</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cothread.pv.PV_array.all_ok"><code class="docutils literal notranslate"><span class="pre">PV_array.all_ok</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  
  <div class="tocsection editthispage">
    <a href="https://github.com/DiamondLightSource/cothread/edit/19/docs/user/catools.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../_sources/user/catools.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=ac02cc09edc035673794"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.14.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>